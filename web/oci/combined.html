<!DOCTYPE html>

<head>
  <title>Azure Combined HomePage</title>
  <link rel="shortcut icon" href="favicon.ico" />
</head>
<html>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<style>
  .center {
    text-align: center;
}
body {
  font-family: Arial, Helvetica, sans-serif;
  font-size: min(25px,3vw);
}
</style>
<body>
  <div class="center">
  <h1>Combined Landing Pages</h1>
  <div include-html="https://sebright.uksouth.cloudapp.azure.com/index.html"></div>
  <div include-html="https://oci.sebright.synology.me/index.html"></div>
  <div include-html="https://ws16.sebright.synology.me/index.html"></div>
  <div include-html="https://sebright.synology.me/web/index.html"></div>
</div>
</body>

<script>
  var UrlRedirect = "https://sebright.uksouth.cloudapp.azure.com/HOME/GetCORSData?format=text/text&uri="
  function includeHTML() {
    elements = document.getElementsByTagName("*");
    for (i = 0; i < elements.length; i++) {
      elmnt = elements[i];
      includehtml = elmnt.getAttribute("include-html");
      if (includehtml) {
        var htmllist = "";
        html = fetchData(UrlRedirect + includehtml);
        var htmlDoc = new DOMParser().parseFromString(html, 'text/html');
        var nodeList = htmlDoc.querySelectorAll('a');
        var nodeTitle = htmlDoc.querySelectorAll('h1');
        htmllist = "<br><b><u><a href='" + includehtml + "''>" +  nodeTitle[0].innerHTML +  "</a></u></b><br><br>"
        for (var i = 0; i < nodeList.length; ++i) {
          htmllist = htmllist + nodeList[i].outerHTML + "<br>"
        }
        elmnt.innerHTML = htmllist
        elmnt.removeAttribute("include-html");
      }
    }
  };

  function fetchData(url) {
    strReturn = "";
    jQuery.ajax({
      url: url,
      crossDomain: true,
      success: function (data) {
        strReturn = data;
      },
      error: function (err) {
        strReturn = err.responseText;
      },
      async: false
    });
    return strReturn;
  }

  includeHTML();

</script>

</html>